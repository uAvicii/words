# æ•…éšœæ’æŸ¥æŒ‡å—

## é—®é¢˜ï¼šæ³¨å†Œæ—¶æç¤º "Unexpected end of JSON input"

### åŸå› åˆ†æ
è¿™ä¸ªé”™è¯¯é€šå¸¸ç”±ä»¥ä¸‹åŸå› å¯¼è‡´ï¼š
1. **åç«¯æœåŠ¡å™¨æœªå¯åŠ¨** - å‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯
2. **ç«¯å£è¢«å ç”¨** - 3000 ç«¯å£å·²è¢«å…¶ä»–ç¨‹åºä½¿ç”¨
3. **CORS é…ç½®é—®é¢˜** - è·¨åŸŸè¯·æ±‚è¢«é˜»æ­¢
4. **ç½‘ç»œè¯·æ±‚å¤±è´¥** - fetch è¯·æ±‚è¿”å›ç©ºå“åº”

### è§£å†³æ­¥éª¤

#### æ­¥éª¤ 1: ç¡®è®¤åç«¯æœåŠ¡å™¨å·²å¯åŠ¨

**æ–¹æ³• 1: ä½¿ç”¨æµ‹è¯•è„šæœ¬ï¼ˆæ¨èï¼‰**
```bash
test-server.bat
```

**æ–¹æ³• 2: æ‰‹åŠ¨å¯åŠ¨**
```bash
cd server
npm install
node server.js
```

**æˆåŠŸæ ‡å¿—ï¼š**
åº”è¯¥çœ‹åˆ°ï¼š
```
ğŸš€ æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000
```

#### æ­¥éª¤ 2: æµ‹è¯•åç«¯ API

åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
http://localhost:3000/api/login
```

æˆ–ä½¿ç”¨ curlï¼š
```bash
curl -X POST http://localhost:3000/api/login ^
  -H "Content-Type: application/json" ^
  -d "{\"username\":\"test\",\"password\":\"123456\"}"
```

**é¢„æœŸç»“æœï¼š**
åº”è¯¥è¿”å› JSON æ•°æ®ï¼Œä¾‹å¦‚ï¼š
```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "username": "test",
  "words": []
}
```

#### æ­¥éª¤ 3: æ£€æŸ¥ç«¯å£å ç”¨

å¦‚æœ 3000 ç«¯å£è¢«å ç”¨ï¼ŒæŸ¥æ‰¾å ç”¨è¿›ç¨‹ï¼š
```bash
netstat -ano | findstr :3000
```

ç»“æŸå ç”¨è¿›ç¨‹ï¼š
```bash
taskkill /PID <è¿›ç¨‹ID> /F
```

æˆ–è€…ä¿®æ”¹åç«¯ç«¯å£ï¼ˆåœ¨ `server/server.js` ä¸­ï¼‰ï¼š
```javascript
const PORT = 3001  // æ”¹ä¸ºå…¶ä»–ç«¯å£
```

åŒæ—¶ä¿®æ”¹å‰ç«¯é…ç½®ï¼ˆåœ¨ `src/stores/userStore.js` å’Œ `src/stores/wordStore.js` ä¸­ï¼‰ï¼š
```javascript
const API_BASE = 'http://localhost:3001/api'
```

#### æ­¥éª¤ 4: å®Œæ•´é‡å¯

1. **å…³é—­æ‰€æœ‰çª—å£**
   - å…³é—­æ‰€æœ‰ç»ˆç«¯çª—å£
   - å…³é—­æµè§ˆå™¨æ ‡ç­¾é¡µ

2. **æ¸…ç†ç¼“å­˜**
   - åˆ é™¤ `server/node_modules` æ–‡ä»¶å¤¹
   - åœ¨æµè§ˆå™¨ä¸­æ¸…é™¤ç½‘ç«™æ•°æ®

3. **é‡æ–°å¯åŠ¨**
   ```bash
   # ç»ˆç«¯ 1 - å¯åŠ¨åç«¯
   cd server
   npm install
   npm start

   # ç»ˆç«¯ 2 - å¯åŠ¨å‰ç«¯ï¼ˆç­‰åç«¯å¯åŠ¨åï¼‰
   npm run dev
   ```

4. **è®¿é—®åº”ç”¨**
   - æ‰“å¼€ http://localhost:5173
   - è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
   - ç‚¹å‡»ç™»å½•/æ³¨å†Œ

## å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### é”™è¯¯ 1: "æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨"
**åŸå› :** åç«¯æœªå¯åŠ¨
**è§£å†³:** å…ˆå¯åŠ¨åç«¯ `npm run server`

### é”™è¯¯ 2: "æœåŠ¡å™¨è¿”å›æ ¼å¼é”™è¯¯"
**åŸå› :** åç«¯è¿”å›çš„ä¸æ˜¯ JSON
**è§£å†³:** æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œï¼ŒæŸ¥çœ‹ç»ˆç«¯é”™è¯¯æ—¥å¿—

### é”™è¯¯ 3: "å¯†ç é”™è¯¯"
**åŸå› :** ç”¨æˆ·å·²å­˜åœ¨ä½†å¯†ç ä¸åŒ¹é…
**è§£å†³:** ä½¿ç”¨æ­£ç¡®çš„å¯†ç ï¼Œæˆ–åˆ é™¤ `server/data/users.json` é‡æ–°æ³¨å†Œ

### é”™è¯¯ 4: CORS é”™è¯¯
**åŸå› :** è·¨åŸŸé…ç½®é—®é¢˜
**è§£å†³:** ç¡®ä¿ `server/server.js` ä¸­æœ‰ `app.use(cors())`

## æ£€æŸ¥æ¸…å•

- [ ] åç«¯æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆç»ˆç«¯æ˜¾ç¤º "æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000"ï¼‰
- [ ] å‰ç«¯åº”ç”¨æ­£åœ¨è¿è¡Œï¼ˆè®¿é—® http://localhost:5173ï¼‰
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ²¡æœ‰ç½‘ç»œé”™è¯¯ï¼ˆæŒ‰ F12 æŸ¥çœ‹ï¼‰
- [ ] `server/data/users.json` æ–‡ä»¶å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
- [ ] ç«¯å£ 3000 å’Œ 5173 æ²¡æœ‰è¢«å ç”¨

## æŸ¥çœ‹æ—¥å¿—

### åç«¯æ—¥å¿—
åç«¯ç»ˆç«¯ä¼šæ˜¾ç¤ºæ‰€æœ‰è¯·æ±‚å’Œé”™è¯¯ï¼š
```
POST /api/login 200 - 15ms
```

### å‰ç«¯æ—¥å¿—
æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ä¼šæ˜¾ç¤ºç½‘ç»œè¯·æ±‚ï¼š
```
Network â†’ æŸ¥çœ‹ /api/login è¯·æ±‚
Console â†’ æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
```

## æ•°æ®æ–‡ä»¶ä½ç½®

- **åç«¯æ•°æ®:** `server/data/users.json`
- **å‰ç«¯ç¼“å­˜:** æµè§ˆå™¨ LocalStorage
  - F12 â†’ Application â†’ Local Storage â†’ http://localhost:5173

## é‡ç½®æ‰€æœ‰æ•°æ®

å¦‚æœéœ€è¦å®Œå…¨é‡ç½®ï¼š

1. **åˆ é™¤åç«¯æ•°æ®**
   ```bash
   del server\data\users.json
   ```

2. **æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**
   - F12 â†’ Application â†’ Storage â†’ Clear site data

3. **é‡å¯æœåŠ¡**
   ```bash
   # é‡æ–°å¯åŠ¨åç«¯å’Œå‰ç«¯
   ```

## ä»ç„¶æ— æ³•è§£å†³ï¼Ÿ

è¯·æ£€æŸ¥ï¼š
1. Node.js ç‰ˆæœ¬ >= 16
   ```bash
   node --version
   ```

2. ç½‘ç»œè¿æ¥æ­£å¸¸

3. é˜²ç«å¢™æœªé˜»æ­¢æœ¬åœ°ç«¯å£

4. æä¾›å®Œæ•´çš„é”™è¯¯ä¿¡æ¯æˆªå›¾ä»¥è·å–å¸®åŠ©

