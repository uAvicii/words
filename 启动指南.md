# 🚀 启动指南

## 重要提示

**必须按顺序启动：先后端，再前端！**

---

## 方法一：手动启动（推荐用于调试）

### 第 1 步：启动后端服务器

打开**第一个**终端窗口：

```bash
cd server
npm install
node server.js
```

**看到这个消息说明成功：**
```
🚀 服务器运行在 http://localhost:3000
```

**保持这个窗口运行，不要关闭！**

---

### 第 2 步：启动前端应用

打开**第二个**终端窗口：

```bash
npm run dev
```

**看到这个消息说明成功：**
```
VITE v5.x.x  ready in xxx ms

➜  Local:   http://localhost:5173/
```

---

### 第 3 步：访问应用

在浏览器中打开：**http://localhost:5173**

---

## 方法二：使用启动脚本

直接双击运行 `start.bat`（Windows）或 `start.sh`（Mac/Linux）

---

## 测试后端是否正常

### 选项 A：使用测试页面（最简单）

1. 确保后端已启动
2. 在浏览器中打开 `test-api.html` 文件
3. 点击"测试连接"按钮
4. 看到绿色的成功消息即可

### 选项 B：直接访问 API

在浏览器中打开：
```
http://localhost:3000/api/login
```

应该显示错误信息（这是正常的，因为没有发送数据）

---

## 常见问题

### ❌ 问题 1：端口 3000 已被占用

**症状：** 后端启动失败，提示端口已被使用

**解决方案：**

1. 查找占用进程：
   ```bash
   netstat -ano | findstr :3000
   ```

2. 结束进程（PID 是上一步找到的进程号）：
   ```bash
   taskkill /PID <进程号> /F
   ```

3. 重新启动后端

---

### ❌ 问题 2：前端显示"无法连接到服务器"

**原因：** 后端没有启动或启动失败

**解决方案：**

1. 检查后端终端是否显示 "服务器运行在 http://localhost:3000"
2. 如果没有，重新启动后端
3. 使用 test-api.html 测试后端连接

---

### ❌ 问题 3："Unexpected end of JSON input"

**原因：** 前端发送请求时后端没有响应或响应格式错误

**解决方案：**

1. **确保后端正在运行**（最常见原因）
2. 清除浏览器缓存（F12 → Application → Clear site data）
3. 重启浏览器
4. 检查 `server/data/users.json` 文件内容是否为 `{}`

---

### ❌ 问题 4：注册后显示"密码错误"

**原因：** 该用户名已存在，但密码不匹配

**解决方案：**

选项 A - 使用正确的密码登录

选项 B - 重置数据：
1. 关闭所有终端
2. 删除 `server/data/users.json`
3. 重新启动后端和前端
4. 重新注册

---

## 完整重启步骤

如果遇到任何问题，完整重启：

1. **停止所有服务**
   - 关闭所有终端窗口（Ctrl+C）
   - 关闭浏览器标签页

2. **清理数据（可选）**
   ```bash
   # 删除用户数据（如果需要重置）
   del server\data\users.json
   ```

3. **重新启动**
   
   终端 1（后端）：
   ```bash
   cd server
   npm install
   node server.js
   ```
   
   终端 2（前端）：
   ```bash
   npm run dev
   ```

4. **访问应用**
   http://localhost:5173

---

## 验证清单

启动后，确认以下几点：

- [ ] 后端终端显示 "🚀 服务器运行在 http://localhost:3000"
- [ ] 前端终端显示 "Local: http://localhost:5173/"
- [ ] 浏览器能打开 http://localhost:5173
- [ ] test-api.html 连接测试成功
- [ ] 能够成功注册/登录

---

## 端口说明

- **后端端口：** 3000
- **前端端口：** 5173

确保这两个端口没有被其他程序占用。

---

## 需要帮助？

如果按照以上步骤仍然无法解决问题：

1. 查看 `故障排查.md` 获取详细诊断步骤
2. 检查 Node.js 版本（需要 >= 16）：
   ```bash
   node --version
   ```
3. 提供完整的错误信息和截图

